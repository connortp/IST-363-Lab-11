<div class="content-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h1 class="display-4 text-center">Step {{step.title}}</h1>
	
				<h2 class="font-weight-normal">Search Function and Current Weather AJAX Request</h2>

				<ul>
					<li>In the controller, create a new property on scope called <code>searchWeather</code> and set it equal to a function</li>
					<li>Inside the function, change the value of the <code>weatherSelected</code> property from false to true. This function will be invoked when a user searched for a location so at this point the search section should be hidden and the current/forecast sections rendered</li>
					<li>Create a variable called <code>zip</code> and set it equal to the value of the text input using jQuery</li>
					<li><a href="https://docs.angularjs.org/api/ng/service/$http" target="_blank">Use the $http service</a> to create the first AJAX call to the Open Weather Map API to get the current weather conditions for the searched zip code. <code>$http</code> is very similar to the <code>$.ajax</code> method in jQuery. The $http service will need to be injected into the controller.
						<ul>
							<li>The HTTP method should be <code>GET</code></li>
							<li>The API endpoint should be <code>http://api.openweathermap.org/data/2.5/weather</code></li>
							<li>Two parameters need to be added to the request: an <code>appid</code> parameter that should equal the API key, and a <code>zip</code> variable that needs to be the searched zip code value plus ',us'. For example: <code>13244,us</code> if you were searching for weather at the Syracuse University area</li>
							<li>Chain a <code>.then</code> method on the $http service and pass it an annonymous function with a parameter called <code>response</code>. This function will run if the AJAX request was successful</li>
							<li>Chain a <code>.catch</code> method after <code>.then</code> and pass through an annonymous function with a parameter called <code>response</code>. This function would run should there be an error with the constructed request (401, 404, 500 errors, etc).</li>
						</ul>
					</li>
					<li>Inside the function in the <code>.then</code> method, log out <code>response</code> to see what data the Open Weather Map's API would return to you</li>
					<li>On the <code>&lt;form&gt;</code> element in the search section, add a <code>ng-submit</code> directive that calls the <code>searchWeather</code> function when a user goes to search for a zip code</li>
				</ul>

				<div class="text-center">
					<div class="code-hide relative">
						<img src="/images/searchweather.png" alt="">					
						<button type="button" class="btn btn-large btn-secondary" ng-click="step.showImg($event)">Show Code</button>
					</div>
				</div>

				<h3 class="font-weight-normal mt-4">The Response</h3>

				<ul>
					<li>If you search for a zip code, look at the console for the response from the API.</li>
					<li>If the AJAX request works, set <code>$scope.current</code> equal to the data returned under the <code>console.log</code> statement</li>
				</ul>

				<div class="text-center">
					<img src="images/currentresponse.png" alt="">
				</div>

			</div>
		</div>
	</div>
</div>

<nav class="step-nav text-center bg-dark">
	<div class="flex flex-align-center flex-justify-between height-100 width-100" role="group" aria-label="Lab Steps">
		<button type="button" class="btn btn-primary" ng-click="step.prevStep(step.step)" ng-disabled="step.step == 1">Back</button>
		<!--<div class="btn btn-light">{{step.step}}</div>-->
		<button type="button" class="btn btn-primary" ng-click="step.nextStep(step.step)" ng-disabled="step.step == config.lab.steps">Next</button>
	</div>

	<div class="step-nav-progress">
		<div class="step-nav-progress__track">
			<div class="step-nav-progress__slider" ng-style="{'width': step.step/config.lab.steps*100 + '%'}"></div>
		</div>
	</div>
</nav>